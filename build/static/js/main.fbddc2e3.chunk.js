(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(13),r=n.n(c),u=(n(19),n(2)),l=n(3),s=n.n(l),i="/api/persons",m=function(){return s.a.get(i)},d=function(e){return s.a.post(i,e)},f=function(e,t){return s.a.put("".concat(i,"/").concat(e),t)},p=function(e){return s.a.delete("".concat(i,"/").concat(e))},b=function(e){var t=e.person,n=e.persons,a=e.setPersons,c=e.setMessage,r=e.setMessageType;return o.a.createElement("div",null,o.a.createElement("p",null,t.name," ",t.number," ",o.a.createElement("button",{onClick:function(e){return function(e,t){console.log("delete button clicked"),e.preventDefault(),window.confirm("Delete ".concat(t.name," ?"))&&p(t.id).then((function(e){a(n.filter((function(t){return t.id!==e.id}))),console.log("person deleted"),r("success"),c("".concat(t.name," deleted successfully")),setTimeout((function(){c(null),window.location.reload(!1)}),3e3)})).catch((function(e){r("error"),c("Information of '".concat(t.name,"' has already been removed from server")),setTimeout((function(){c(null),window.location.reload(!1)}),3e3),a(n)}))}(e,t)}},"delete")))},w=function(e){var t=e.persons,n=e.newName,a=e.newNumber,c=e.setPersons,r=e.setNewName,u=e.setNewNumber,l=e.setMessage,s=e.setMessageType;return o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var o={name:n,number:a};if(t.map((function(e){return e.name})).includes(n)){if(window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))){var i=t.filter((function(e){return e.name===n})).map((function(e){return e.id}));console.log(" id to be updated: ".concat(i)),f(i,o).then((function(e){c(t.map((function(t){return t.id!==i?t:e.data}))),r(""),u(""),s("success"),l("".concat(n," updated successfully")),setTimeout((function(){l(null),window.location.reload(!1)}),3e3),console.log("existing person with id ".concat(i," updated"))}))}}else d(o).then((function(e){c(t.concat(e.data)),r(""),u(""),s("success"),l("".concat(n," created successfully")),setTimeout((function(){l(null),window.location.reload(!1)}),3e3)})).catch((function(e){s("error"),l("".concat(e.response.data.error)),setTimeout((function(){l(null),window.location.reload(!1)}),3e3),console.log("new person added")}))}},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:n,onChange:function(e){r(e.target.value)}})),o.a.createElement("div",null,"number ",o.a.createElement("input",{value:a,onChange:function(e){u(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},g=function(e){var t=e.setFilter,n=e.setShowAll;return o.a.createElement("p",null,"filter shown with ",o.a.createElement("input",{onChange:function(e){e.target.value.length>0?n(!1):n(!0),t(e.target.value)}}))},h=function(e){var t=e.message,n=e.messageType;return null===t?null:o.a.createElement("div",{className:n},t)},v=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),l=Object(u.a)(r,2),s=l[0],i=l[1],d=Object(a.useState)(""),f=Object(u.a)(d,2),p=f[0],v=f[1],E=Object(a.useState)(""),j=Object(u.a)(E,2),O=j[0],y=j[1],N=Object(a.useState)(!0),T=Object(u.a)(N,2),S=T[0],M=T[1],k=Object(a.useState)(null),C=Object(u.a)(k,2),P=C[0],A=C[1],D=Object(a.useState)(null),x=Object(u.a)(D,2),F=x[0],I=x[1];Object(a.useEffect)((function(){m().then((function(e){c(e.data)}))}),[]);var J=S?n:n.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())}));return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(h,{message:P,messageType:F}),o.a.createElement(g,{setFilter:y,setShowAll:M}),o.a.createElement("h3",null,"Add a new"),o.a.createElement(w,{persons:n,newName:s,newNumber:p,setPersons:c,setNewName:i,setNewNumber:v,setMessage:A,setMessageType:I}),o.a.createElement("h3",null,"Numbers"),J.map((function(e){return o.a.createElement(b,{key:e.name,person:e,persons:n,setPersons:c,setMessage:A,setMessageType:I})})))};r.a.render(o.a.createElement(v,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.fbddc2e3.chunk.js.map